{"version":3,"sources":["/Users/ronrennick/Sites/solaris/woocommerce/packages/js/e2e-core-tests/src/specs/merchant/wp-admin-settings-general.test.js"],"names":["merchant","settingsPageSaveChanges","verifyValueOfInputField","require","it","describe","beforeAll","runUpdateGeneralSettingsTest","login","openSettings","expect","page","toMatchElement","text","toSelect","Promise","all","toFill","module","exports"],"mappings":"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","sourcesContent":["/* eslint-disable jest/no-export, jest/no-disabled-tests */\n/**\n * Internal dependencies\n */\nconst {\n\tmerchant,\n\tsettingsPageSaveChanges,\n\tverifyValueOfInputField,\n} = require( '@woocommerce/e2e-utils' );\n\n/**\n * External dependencies\n */\nconst {\n\tit,\n\tdescribe,\n\tbeforeAll,\n} = require( '@jest/globals' );\n\nconst runUpdateGeneralSettingsTest = () => {\n\tdescribe('WooCommerce General Settings', () => {\n\t\tbeforeAll(async () => {\n\t\t\tawait merchant.login();\n\t\t});\n\n\t\tit('can update settings', async () => {\n\t\t\t// Go to general settings page\n\t\t\tawait merchant.openSettings('general');\n\n\t\t\t// Make sure the general tab is active\n\t\t\tawait expect(page).toMatchElement('a.nav-tab-active', {text: 'General'});\n\n\t\t\t// Set selling location to all countries first,\n\t\t\t// so we can choose california as base location.\n\t\t\tawait expect(page).toSelect('#woocommerce_allowed_countries', 'Sell to all countries');\n\t\t\tawait settingsPageSaveChanges();\n\n\t\t\t// Verify that settings have been saved\n\t\t\tawait Promise.all([\n\t\t\t\texpect(page).toMatchElement('#message', {text: 'Your settings have been saved.'}),\n\t\t\t\texpect(page).toMatchElement('#woocommerce_allowed_countries', {text: 'Sell to all countries'}),\n\t\t\t]);\n\n\t\t\t// Set base location with state CA.\n\t\t\tawait expect(page).toSelect('select[name=\"woocommerce_default_country\"]', 'United States (US) — California');\n\t\t\tawait settingsPageSaveChanges();\n\n\t\t\t// Verify that settings have been saved\n\t\t\tawait Promise.all([\n\t\t\t\texpect(page).toMatchElement('#message', {text: 'Your settings have been saved.'}),\n\t\t\t\texpect(page).toMatchElement('select[name=\"woocommerce_default_country\"]', {text: 'United States (US) — California'}),\n\t\t\t]);\n\n\t\t\t// Set selling location to specific countries first, so we can choose U.S as base location (without state).\n\t\t\t// This will makes specific countries option appears.\n\t\t\tawait expect(page).toSelect('#woocommerce_allowed_countries', 'Sell to specific countries');\n\t\t\tawait expect(page).toSelect('select[name=\"woocommerce_specific_allowed_countries[]\"]', 'United States (US)');\n\t\t\tawait settingsPageSaveChanges();\n\n\t\t\t// Verify that settings have been saved\n\t\t\tawait Promise.all([\n\t\t\t\texpect(page).toMatchElement('#message', {text: 'Your settings have been saved.'}),\n\t\t\t\texpect(page).toMatchElement('#woocommerce_allowed_countries', {text: 'Sell to specific countries'}),\n\t\t\t\texpect(page).toMatchElement('select[name=\"woocommerce_specific_allowed_countries[]\"]', {text: 'United States (US)'}),\n\t\t\t]);\n\n\t\t\t// Set currency options.\n\t\t\tawait expect(page).toFill('#woocommerce_price_thousand_sep', ',');\n\t\t\tawait expect(page).toFill('#woocommerce_price_decimal_sep', '.');\n\t\t\tawait expect(page).toFill('#woocommerce_price_num_decimals', '2');\n\t\t\tawait settingsPageSaveChanges();\n\n\t\t\t// Verify that settings have been saved\n\t\t\tawait Promise.all([\n\t\t\t\texpect(page).toMatchElement('#message', {text: 'Your settings have been saved.'}),\n\t\t\t\tverifyValueOfInputField('#woocommerce_price_thousand_sep', ','),\n\t\t\t\tverifyValueOfInputField('#woocommerce_price_decimal_sep', '.'),\n\t\t\t\tverifyValueOfInputField('#woocommerce_price_num_decimals', '2'),\n\t\t\t]);\n\t\t});\n\t});\n};\n\nmodule.exports = runUpdateGeneralSettingsTest;\n"]}