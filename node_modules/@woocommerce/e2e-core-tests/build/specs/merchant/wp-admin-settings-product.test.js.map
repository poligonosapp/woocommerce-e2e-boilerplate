{"version":3,"sources":["/Users/ronrennick/Sites/solaris/woocommerce/packages/js/e2e-core-tests/src/specs/merchant/wp-admin-settings-product.test.js"],"names":["merchant","setCheckbox","settingsPageSaveChanges","unsetCheckbox","verifyCheckboxIsSet","verifyCheckboxIsUnset","require","runProductSettingsTest","describe","beforeAll","login","it","openSettings","expect","page","toMatchElement","text","toSelect","Promise","all","reload","module","exports"],"mappings":";;AAAA;;AACA;AACA;AACA;AACA,MAAM;AACLA,EAAAA,QADK;AAELC,EAAAA,WAFK;AAGLC,EAAAA,uBAHK;AAILC,EAAAA,aAJK;AAKLC,EAAAA,mBALK;AAMLC,EAAAA;AANK,IAOFC,OAAO,CAAE,wBAAF,CAPX;;AASA,MAAMC,sBAAsB,GAAG,MAAM;AACpCC,EAAAA,QAAQ,CAAC,uDAAD,EAA0D,MAAM;AACvEC,IAAAA,SAAS,CAAC,YAAY;AACrB,YAAMT,QAAQ,CAACU,KAAT,EAAN;AACA,KAFQ,CAAT;AAIAC,IAAAA,EAAE,CAAC,qBAAD,EAAwB,YAAY;AACrC;AACA,YAAMX,QAAQ,CAACY,YAAT,CAAsB,UAAtB,EAAkC,cAAlC,CAAN,CAFqC,CAIrC;;AACA,YAAMC,MAAM,CAACC,IAAD,CAAN,CAAaC,cAAb,CAA4B,kBAA5B,EAAgD;AAACC,QAAAA,IAAI,EAAE;AAAP,OAAhD,CAAN;AACA,YAAMH,MAAM,CAACC,IAAD,CAAN,CAAaC,cAAb,CAA4B,+BAA5B,EAA6D;AAACC,QAAAA,IAAI,EAAE;AAAP,OAA7D,CAAN;AAEA,YAAMH,MAAM,CAACC,IAAD,CAAN,CAAaG,QAAb,CAAsB,mCAAtB,EAA2D,0BAA3D,CAAN;AACA,YAAMhB,WAAW,CAAC,sCAAD,CAAjB;AACA,YAAMA,WAAW,CAAC,mDAAD,CAAjB;AACA,YAAMA,WAAW,CAAC,kDAAD,CAAjB;AACA,YAAMC,uBAAuB,EAA7B,CAZqC,CAcrC;;AACA,YAAMgB,OAAO,CAACC,GAAR,CAAY,CACjBN,MAAM,CAACC,IAAD,CAAN,CAAaC,cAAb,CAA4B,UAA5B,EAAwC;AAACC,QAAAA,IAAI,EAAE;AAAP,OAAxC,CADiB,EAEjBH,MAAM,CAACC,IAAD,CAAN,CAAaC,cAAb,CAA4B,mCAA5B,EAAiE;AAACC,QAAAA,IAAI,EAAE;AAAP,OAAjE,CAFiB,EAGjBZ,mBAAmB,CAAC,sCAAD,CAHF,EAIjBA,mBAAmB,CAAC,mDAAD,CAJF,EAKjBA,mBAAmB,CAAC,kDAAD,CALF,CAAZ,CAAN;AAQA,YAAMU,IAAI,CAACM,MAAL,EAAN;AACA,YAAMP,MAAM,CAACC,IAAD,CAAN,CAAaG,QAAb,CAAsB,mCAAtB,EAA2D,iBAA3D,CAAN;AACA,YAAMd,aAAa,CAAC,sCAAD,CAAnB;AACA,YAAMA,aAAa,CAAC,mDAAD,CAAnB;AACA,YAAMA,aAAa,CAAC,kDAAD,CAAnB;AACA,YAAMD,uBAAuB,EAA7B,CA5BqC,CA8BrC;;AACA,YAAMgB,OAAO,CAACC,GAAR,CAAY,CACjBN,MAAM,CAACC,IAAD,CAAN,CAAaC,cAAb,CAA4B,UAA5B,EAAwC;AAACC,QAAAA,IAAI,EAAE;AAAP,OAAxC,CADiB,EAEjBH,MAAM,CAACC,IAAD,CAAN,CAAaC,cAAb,CAA4B,mCAA5B,EAAiE;AAACC,QAAAA,IAAI,EAAE;AAAP,OAAjE,CAFiB,EAGjBX,qBAAqB,CAAC,sCAAD,CAHJ,EAIjBA,qBAAqB,CAAC,mDAAD,CAJJ,EAKjBA,qBAAqB,CAAC,kDAAD,CALJ,CAAZ,CAAN;AAOA,KAtCC,CAAF;AAuCA,GA5CO,CAAR;AA6CA,CA9CD;;AAgDAgB,MAAM,CAACC,OAAP,GAAiBf,sBAAjB","sourcesContent":["/* eslint-disable jest/no-export, jest/no-disabled-tests */\n/**\n * Internal dependencies\n */\nconst {\n\tmerchant,\n\tsetCheckbox,\n\tsettingsPageSaveChanges,\n\tunsetCheckbox,\n\tverifyCheckboxIsSet,\n\tverifyCheckboxIsUnset,\n} = require( '@woocommerce/e2e-utils' );\n\nconst runProductSettingsTest = () => {\n\tdescribe('WooCommerce Products > Downloadable Products Settings', () => {\n\t\tbeforeAll(async () => {\n\t\t\tawait merchant.login();\n\t\t});\n\n\t\tit('can update settings', async () => {\n\t\t\t// Go to downloadable products settings page\n\t\t\tawait merchant.openSettings('products', 'downloadable');\n\n\t\t\t// Make sure the product tab is active\n\t\t\tawait expect(page).toMatchElement('a.nav-tab-active', {text: 'Products'});\n\t\t\tawait expect(page).toMatchElement('ul.subsubsub > li > a.current', {text: 'Downloadable products'});\n\n\t\t\tawait expect(page).toSelect('#woocommerce_file_download_method', 'Redirect only (Insecure)');\n\t\t\tawait setCheckbox('#woocommerce_downloads_require_login');\n\t\t\tawait setCheckbox('#woocommerce_downloads_grant_access_after_payment');\n\t\t\tawait setCheckbox('#woocommerce_downloads_redirect_fallback_allowed');\n\t\t\tawait settingsPageSaveChanges();\n\n\t\t\t// Verify that settings have been saved\n\t\t\tawait Promise.all([\n\t\t\t\texpect(page).toMatchElement('#message', {text: 'Your settings have been saved.'}),\n\t\t\t\texpect(page).toMatchElement('#woocommerce_file_download_method', {text: 'Redirect only (Insecure)'}),\n\t\t\t\tverifyCheckboxIsSet('#woocommerce_downloads_require_login'),\n\t\t\t\tverifyCheckboxIsSet('#woocommerce_downloads_grant_access_after_payment'),\n\t\t\t\tverifyCheckboxIsSet('#woocommerce_downloads_redirect_fallback_allowed'),\n\t\t\t]);\n\n\t\t\tawait page.reload();\n\t\t\tawait expect(page).toSelect('#woocommerce_file_download_method', 'Force downloads');\n\t\t\tawait unsetCheckbox('#woocommerce_downloads_require_login');\n\t\t\tawait unsetCheckbox('#woocommerce_downloads_grant_access_after_payment');\n\t\t\tawait unsetCheckbox('#woocommerce_downloads_redirect_fallback_allowed');\n\t\t\tawait settingsPageSaveChanges();\n\n\t\t\t// Verify that settings have been saved\n\t\t\tawait Promise.all([\n\t\t\t\texpect(page).toMatchElement('#message', {text: 'Your settings have been saved.'}),\n\t\t\t\texpect(page).toMatchElement('#woocommerce_file_download_method', {text: 'Force downloads'}),\n\t\t\t\tverifyCheckboxIsUnset('#woocommerce_downloads_require_login'),\n\t\t\t\tverifyCheckboxIsUnset('#woocommerce_downloads_grant_access_after_payment'),\n\t\t\t\tverifyCheckboxIsUnset('#woocommerce_downloads_redirect_fallback_allowed'),\n\t\t\t]);\n\t\t});\n\t});\n};\n\nmodule.exports = runProductSettingsTest;\n"]}