{"version":3,"sources":["/Users/ronrennick/Sites/solaris/woocommerce/packages/js/e2e-core-tests/src/specs/shopper/front-end-my-account-create-account.test.js"],"names":["shopper","merchant","setCheckbox","settingsPageSaveChanges","withRestApi","require","it","describe","beforeAll","afterAll","customerEmailAddress","runMyAccountCreateAccountTest","deleteCustomerByEmail","login","openSettings","logout","gotoMyAccount","page","waitForSelector","expect","toFill","toClick","waitForNavigation","waitUntil","toMatchElement","openAllUsersView","text","module","exports"],"mappings":";;AAAA;AACA;AACA;AACA,MAAM;AACLA,EAAAA,OADK;AAELC,EAAAA,QAFK;AAGLC,EAAAA,WAHK;AAILC,EAAAA,uBAJK;AAKLC,EAAAA;AALK,IAMFC,OAAO,CAAE,wBAAF,CANX;AAQA;AACA;AACA;;;AACA,MAAM;AAAEC,EAAAA,EAAF;AAAMC,EAAAA,QAAN;AAAgBC,EAAAA,SAAhB;AAA2BC,EAAAA;AAA3B,IAAwCJ,OAAO,CAAE,eAAF,CAArD;;AAEA,MAAMK,oBAAoB,GAAG,2BAA7B;;AAEA,MAAMC,6BAA6B,GAAG,MAAM;AAC3CJ,EAAAA,QAAQ,CAAC,mCAAD,EAAsC,MAAM;AACnDC,IAAAA,SAAS,CAAC,YAAY;AACrB,YAAMJ,WAAW,CAACQ,qBAAZ,CAAmCF,oBAAnC,CAAN;AACA,YAAMT,QAAQ,CAACY,KAAT,EAAN,CAFqB,CAIrB;;AACA,YAAMZ,QAAQ,CAACa,YAAT,CAAsB,SAAtB,CAAN;AACA,YAAMZ,WAAW,CAAC,4CAAD,CAAjB;AACA,YAAMC,uBAAuB,EAA7B;AAEA,YAAMF,QAAQ,CAACc,MAAT,EAAN;AACA,KAVQ,CAAT;AAYAN,IAAAA,QAAQ,CAAE,YAAY;AACrB,YAAMT,OAAO,CAACe,MAAR,EAAN;AACA,KAFO,CAAR;AAIAT,IAAAA,EAAE,CAAC,yCAAD,EAA4C,YAAY;AACzD,YAAMN,OAAO,CAACgB,aAAR,EAAN;AACA,YAAMC,IAAI,CAACC,eAAL,CAAqB,4BAArB,CAAN;AACA,YAAMC,MAAM,CAACF,IAAD,CAAN,CAAaG,MAAb,CAAoB,iBAApB,EAAuCV,oBAAvC,CAAN;AACA,YAAMS,MAAM,CAACF,IAAD,CAAN,CAAaI,OAAb,CAAqB,yBAArB,CAAN;AACA,YAAMJ,IAAI,CAACK,iBAAL,CAAuB;AAACC,QAAAA,SAAS,EAAE;AAAZ,OAAvB,CAAN;AACA,YAAMJ,MAAM,CAACF,IAAD,CAAN,CAAaO,cAAb,CAA4B,IAA5B,EAAkC,YAAlC,CAAN,CANyD,CAQzD;;AACA,YAAMvB,QAAQ,CAACY,KAAT,EAAN;AACA,YAAMZ,QAAQ,CAACwB,gBAAT,EAAN;AACA,YAAMN,MAAM,CAACF,IAAD,CAAN,CAAaO,cAAb,CAA4B,2BAA5B,EAAyD;AAACE,QAAAA,IAAI,EAAEhB;AAAP,OAAzD,CAAN;AACA,KAZC,CAAF;AAaA,GA9BO,CAAR;AA+BA,CAhCD;;AAkCAiB,MAAM,CAACC,OAAP,GAAiBjB,6BAAjB","sourcesContent":["/**\n * Internal dependencies\n */\nconst {\n\tshopper,\n\tmerchant,\n\tsetCheckbox,\n\tsettingsPageSaveChanges,\n\twithRestApi,\n} = require( '@woocommerce/e2e-utils' );\n\n/**\n * External dependencies\n */\nconst { it, describe, beforeAll, afterAll } = require( '@jest/globals' );\n\nconst customerEmailAddress = 'john.doe.test@example.com';\n\nconst runMyAccountCreateAccountTest = () => {\n\tdescribe('Shopper My Account Create Account', () => {\n\t\tbeforeAll(async () => {\n\t\t\tawait withRestApi.deleteCustomerByEmail( customerEmailAddress );\n\t\t\tawait merchant.login();\n\n\t\t\t// Set checkbox in the settings to enable registration in my account\n\t\t\tawait merchant.openSettings('account');\n\t\t\tawait setCheckbox('#woocommerce_enable_myaccount_registration');\n\t\t\tawait settingsPageSaveChanges();\n\n\t\t\tawait merchant.logout();\n\t\t});\n\n\t\tafterAll( async () => {\n\t\t\tawait shopper.logout();\n\t\t} );\n\n\t\tit('can create a new account via my account', async () => {\n\t\t\tawait shopper.gotoMyAccount();\n\t\t\tawait page.waitForSelector('.woocommerce-form-register');\n\t\t\tawait expect(page).toFill('input#reg_email', customerEmailAddress);\n\t\t\tawait expect(page).toClick('button[name=\"register\"]');\n\t\t\tawait page.waitForNavigation({waitUntil: 'networkidle0'});\n\t\t\tawait expect(page).toMatchElement('h1', 'My account');\n\n\t\t\t// Verify user has been created successfully\n\t\t\tawait merchant.login();\n\t\t\tawait merchant.openAllUsersView();\n\t\t\tawait expect(page).toMatchElement('td.email.column-email > a', {text: customerEmailAddress});\n\t\t});\n\t});\n};\n\nmodule.exports = runMyAccountCreateAccountTest;\n"]}