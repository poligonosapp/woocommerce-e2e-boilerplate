{"version":3,"sources":["/Users/ronrennick/Sites/solaris/woocommerce/packages/js/e2e-core-tests/src/specs/activate-and-setup/onboarding-tasklist.test.js"],"names":["merchant","completeOnboardingWizard","withRestApi","addShippingZoneAndMethod","IS_RETEST_MODE","require","config","it","describe","shippingZoneNameUS","get","runOnboardingFlowTest","beforeAll","login","resetOnboarding","deleteAllShippingZones","deleteAllShippingClasses","resetSettingsGroupToDefault","alternative","runTaskListTest","page","evaluate","document","querySelector","scrollIntoView","taskListItems","$$","expect","length","toBeInRange","setupTaskListItem","$x","click","waitForSelector","waitFor","openNewShipping","module","exports"],"mappings":"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","sourcesContent":["/**\n * Internal dependencies\n */\nconst {\n\tmerchant,\n\tcompleteOnboardingWizard,\n\twithRestApi,\n\taddShippingZoneAndMethod,\n\tIS_RETEST_MODE,\n} = require( '@woocommerce/e2e-utils' );\n\n/**\n * External dependencies\n */\nconst config = require( 'config' );\nimport deprecated from '@wordpress/deprecated';\nconst {\n\tit,\n\tdescribe,\n} = require( '@jest/globals' );\n\nconst shippingZoneNameUS = config.get( 'addresses.customer.shipping.country' );\n\nconst runOnboardingFlowTest = () => {\n\tdescribe('Store owner can go through store Onboarding', () => {\n\t\tbeforeAll(async () => {\n\t\t\tawait merchant.login();\n\t\t});\n\n\t\tif ( IS_RETEST_MODE ) {\n\t\t\tit('can reset onboarding to default settings', async () => {\n\t\t\t\tawait withRestApi.resetOnboarding();\n\t\t\t});\n\n\t\t\tit('can reset shipping zones to default settings', async () => {\n\t\t\t\tawait withRestApi.deleteAllShippingZones();\n\t\t\t});\n\n\t\t\tit('can reset shipping classes', async () => {\n\t\t\t\tawait withRestApi.deleteAllShippingClasses();\n\t\t\t})\n\n\t\t\tit('can reset to default settings', async () => {\n\t\t\t\tawait withRestApi.resetSettingsGroupToDefault('general');\n\t\t\t\tawait withRestApi.resetSettingsGroupToDefault('products');\n\t\t\t\tawait withRestApi.resetSettingsGroupToDefault('tax');\n\t\t\t});\n\t\t}\n\n\t\tit('can start and complete onboarding when visiting the site for the first time.', async () => {\n\t\t\tdeprecated( 'runOnboardingFlowTest', {\n\t\t\t\talternative: '@woocommerce/admin-e2e-tests `testAdminOnboardingWizard()`',\n\t\t\t});\n\t\t\tawait completeOnboardingWizard();\n\t\t});\n\t});\n};\n\nconst runTaskListTest = () => {\n\tdescribe('Store owner can go through setup Task List', () => {\n\t\tbeforeAll(async () => {\n\t\t\tawait merchant.login();\n\t\t});\n\n\t\tit('can setup shipping', async () => {\n\t\t\tdeprecated( 'runTaskListTest', {\n\t\t\t\talternative: '@woocommerce/admin-e2e-tests `testAdminHomescreenTasklist()`',\n\t\t\t});\n\t\t\tawait page.evaluate(() => {\n\t\t\t\tdocument.querySelector('.woocommerce-list__item-title').scrollIntoView();\n\t\t\t});\n\t\t\t// Query for all tasks on the list\n\t\t\tconst taskListItems = await page.$$('.woocommerce-list__item-title');\n\t\t\texpect(taskListItems.length).toBeInRange( 5, 6 );\n\n\t\t\t// Work around for https://github.com/woocommerce/woocommerce-admin/issues/6761\n\t\t\tif ( taskListItems.length == 6 ) {\n\t\t\t\t// Click on \"Set up shipping\" task to move to the next step\n\t\t\t\tconst [ setupTaskListItem ] = await page.$x( '//div[contains(text(),\"Set up shipping\")]' );\n\t\t\t\tawait setupTaskListItem.click();\n\n\t\t\t\t// Wait for \"Proceed\" button to become active\n\t\t\t\tawait page.waitForSelector('button.is-primary:not(:disabled)');\n\t\t\t\tawait page.waitFor(3000);\n\n\t\t\t\t// Click on \"Proceed\" button to save shipping settings\n\t\t\t\tawait page.click('button.is-primary');\n\t\t\t\tawait page.waitFor(3000);\n\t\t\t} else {\n\t\t\t\tawait merchant.openNewShipping();\n\t\t\t\tawait addShippingZoneAndMethod(shippingZoneNameUS);\n\t\t\t}\n\t\t});\n\t});\n};\n\nmodule.exports = {\n\trunOnboardingFlowTest,\n\trunTaskListTest,\n};\n"]}