{"version":3,"sources":["/Users/ronrennick/Sites/solaris/woocommerce/packages/js/e2e-core-tests/src/specs/merchant/wp-admin-product-new.test.js"],"names":["shopper","merchant","clickTab","uiUnblocked","evalAndClick","setCheckbox","setBrowserViewport","verifyAndPublish","waitForSelector","waitForSelectorWithoutThrow","require","waitAndClick","it","describe","config","VirtualProductName","NonVirtualProductName","simpleProductPrice","has","get","defaultAttributes","openNewProductAndVerify","openNewProduct","expect","page","title","resolves","toMatch","selectVariationAction","action","focus","toSelect","clickGoButton","saveChanges","toClick","text","expandVariations","runAddSimpleProductTest","width","height","login","toFill","logout","goToShop","addToCartFromShopPage","goToCart","productIsInCart","not","toMatchElement","removeFromCart","reload","waitUntil","runAddVariableProductTest","i","firstDialog","toDisplayDialog","message","visible","timeout","index","val1","val2","attr3","attr2","attr1","chkbox","$","isChecked","getProperty","jsonValue","toEqual","variationsCount","$$","toHaveLength","length","actualStockQty","$eval","stockQtyInput","value","actualLowStockThresh","lowStockThreshInput","confirmDialog","module","exports"],"mappings":"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","sourcesContent":["/**\n * Internal dependencies\n */\nconst {\n\tshopper,\n\tmerchant,\n\tclickTab,\n\tuiUnblocked,\n\tevalAndClick,\n\tsetCheckbox,\n\tsetBrowserViewport,\n\tverifyAndPublish,\n\twaitForSelector,\n\twaitForSelectorWithoutThrow,\n} = require( '@woocommerce/e2e-utils' );\nconst {\n\twaitAndClick,\n} = require( '@woocommerce/e2e-environment' );\n\n/**\n * External dependencies\n */\nconst {\n\tit,\n\tdescribe,\n} = require( '@jest/globals' );\nconst config = require( 'config' );\n\nconst VirtualProductName = 'Virtual Product Name';\nconst NonVirtualProductName = 'Non-Virtual Product Name';\nconst simpleProductPrice = config.has('products.simple.price') ? config.get('products.simple.price') : '9.99';\nconst defaultAttributes = [ 'val2', 'val1', 'val2' ];\n\nconst openNewProductAndVerify = async () => {\n\t// Go to \"add product\" page\n\tawait merchant.openNewProduct();\n\n\t// Make sure we're on the add product page\n\tawait expect(page.title()).resolves.toMatch('Add new product');\n}\n\n/**\n * Select a variation action from the actions menu.\n *\n * @param action item you selected from the variation actions menu\n */\nconst selectVariationAction = async ( action ) => {\n\tawait waitForSelector( page, 'select.variation_actions:not(:disabled)' );\n\tawait page.focus( 'select.variation_actions' );\n\tawait expect( page ).toSelect( 'select.variation_actions', action );\n};\n\nconst clickGoButton = async () => {\n\tawait evalAndClick( 'a.do_variation_action' );\n};\n\nconst saveChanges = async () => {\n\tawait page.focus( 'button.save-variation-changes' );\n\tawait expect( page ).toClick( 'button.save-variation-changes', {\n\t\ttext: 'Save changes',\n\t} );\n\tawait uiUnblocked();\n};\n\nconst expandVariations = async () => {\n\tawait waitAndClick( page, '.variations-pagenav .expand_all' );\n};\n\nconst runAddSimpleProductTest = () => {\n\tdescribe('Add New Simple Product Page', () => {\n\t\tit('can create simple virtual product and add it to the cart', async () => {\n\n\t\t\t// @todo: remove this once https://github.com/woocommerce/woocommerce/issues/31337 has been addressed\n\t\t\tawait setBrowserViewport( {\n\t\t\t\twidth: 970,\n\t\t\t\theight: 700,\n\t\t\t} );\n\n\t\t\tawait merchant.login();\n\t\t\tawait openNewProductAndVerify();\n\n\t\t\t// Set product data and publish the product\n\t\t\tawait expect(page).toFill('#title', VirtualProductName);\n\t\t\tawait expect(page).toClick('#_virtual');\n\t\t\tawait clickTab('General');\n\t\t\tawait expect(page).toFill('#_regular_price', simpleProductPrice);\n\t\t\tawait verifyAndPublish();\n\n\t\t\tawait merchant.logout();\n\t\t});\n\n\t\tit('can have a shopper add the simple virtual product to the cart', async () => {\n\t\t\t// See product in the shop and add it to the cart\n\t\t\tawait shopper.goToShop();\n\t\t\tawait shopper.addToCartFromShopPage(VirtualProductName);\n\t\t\tawait shopper.goToCart();\n\t\t\tawait shopper.productIsInCart(VirtualProductName);\n\n\t\t\t// Assert that the page does not contain shipping calculation button\n\t\t\tawait expect(page).not.toMatchElement('a.shipping-calculator-button');\n\n\t\t\t// Remove product from cart\n\t\t\tawait shopper.removeFromCart(VirtualProductName);\n\t\t});\n\n\t\tit('can create simple non-virtual product and add it to the cart', async () => {\n\t\t\t// @todo: remove this once https://github.com/woocommerce/woocommerce/issues/31337 has been addressed\n\t\t\tawait setBrowserViewport( {\n\t\t\t\twidth: 960,\n\t\t\t\theight: 700,\n\t\t\t} );\n\n\t\t\tawait merchant.login();\n\t\t\tawait openNewProductAndVerify();\n\n\t\t\t// Set product data and publish the product\n\t\t\tawait expect(page).toFill('#title', NonVirtualProductName);\n\t\t\tawait clickTab('General');\n\t\t\tawait expect(page).toFill('#_regular_price', simpleProductPrice);\n\t\t\tawait verifyAndPublish();\n\n\t\t\tawait merchant.logout();\n\t\t});\n\n\t\tit('can have a shopper add the simple non-virtual product to the cart', async () => {\n\t\t\t// See product in the shop and add it to the cart\n\t\t\tawait shopper.goToShop();\n\n\t\t\tawait page.reload({ waitUntil: ['networkidle0', 'domcontentloaded'] });\n\n\t\t\tawait shopper.addToCartFromShopPage(NonVirtualProductName);\n\t\t\tawait shopper.goToCart();\n\t\t\tawait shopper.productIsInCart(NonVirtualProductName);\n\n\t\t\t// Assert that the page does contain shipping calculation button\n\t\t\tawait page.waitForSelector('a.shipping-calculator-button');\n\t\t\tawait expect(page).toMatchElement('a.shipping-calculator-button');\n\n\t\t\t// Remove product from cart\n\t\t\tawait shopper.removeFromCart(NonVirtualProductName);\n\t\t});\n\t});\n};\n\nconst runAddVariableProductTest = () => {\n\tdescribe('Add New Variable Product Page', () => {\n\t\tit('can create product with variations', async () => {\n\t\t\tawait merchant.login();\n\t\t\tawait openNewProductAndVerify();\n\n\t\t\t// Set product data\n\t\t\tawait expect(page).toFill('#title', 'Variable Product with Three Variations');\n\t\t\tawait expect(page).toSelect('#product-type', 'Variable product');\n\t\t});\n\n\t\tit('can create set variable product attributes', async () => {\n\n\t\t\t// Create attributes for variations\n\t\t\tawait waitAndClick( page, '.attribute_tab a' );\n\t\t\tawait expect( page ).toSelect( 'select[name=\"attribute_taxonomy\"]', 'Custom product attribute' );\n\n\t\t\tfor ( let i = 0; i < 3; i++ ) {\n\t\t\t\tawait expect(page).toClick( 'button.add_attribute', {text: 'Add'} );\n\t\t\t\t// Wait for attribute form to load\n\t\t\t\tawait uiUnblocked();\n\n\t\t\t\tawait page.focus(`input[name=\"attribute_names[${i}]\"]`);\n\t\t\t\tawait expect(page).toFill(`input[name=\"attribute_names[${i}]\"]`, 'attr #' + (i + 1));\n\t\t\t\tawait expect(page).toFill(`textarea[name=\"attribute_values[${i}]\"]`, 'val1 | val2');\n\t\t\t\tawait waitAndClick( page, `input[name=\"attribute_variation[${i}]\"]`);\n\t\t\t}\n\n\t\t\tawait expect(page).toClick( 'button', {text: 'Save attributes'});\n\n\t\t\t// Wait for attribute form to save (triggers 2 UI blocks)\n\t\t\tawait uiUnblocked();\n\t\t\tawait uiUnblocked();\n\t\t});\n\n\t\tit('can create variations from all attributes', async () => {\n\t\t\t// Create variations from attributes\n\t\t\tawait waitForSelector( page, '.variations_tab' );\n\t\t\tawait waitAndClick( page, '.variations_tab a' );\n\t\t\tawait selectVariationAction('Create variations from all attributes');\n\n\t\t\t// headless: false doesn't require this\n\t\t\tconst firstDialog = await expect( page ).toDisplayDialog(\n\t\t\t\tasync () => {\n\t\t\t\t\tawait clickGoButton();\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tawait expect(firstDialog.message()).toMatch('Are you sure you want to link all variations?');\n\n\t\t\t// Set some variation data\n\t\t\tawait uiUnblocked();\n\t\t\tawait uiUnblocked();\n\t\t});\n\n\t\tit('can add variation attributes', async () => {\n\t\t\tawait waitAndClick( page, '.variations_tab a' );\n\t\t\tawait uiUnblocked();\n\t\t\tawait waitForSelector(\n\t\t\t\tpage,\n\t\t\t\t'select[name=\"attribute_attr-1[0]\"]',\n\t\t\t\t{\n\t\t\t\t\tvisible: true,\n\t\t\t\t\ttimeout: 5000\n\t\t\t\t}\n\t\t\t);\n\n\t\t\t// Verify that variations were created\n\t\t\tfor ( let index = 0; index < 8; index++ ) {\n\t\t\t\tconst val1 = { text: 'val1' };\n\t\t\t\tconst val2 = { text: 'val2' };\n\n\t\t\t\t// odd / even\n\t\t\t\tlet attr3 = !! ( index % 2 );\n\t\t\t\t// 0-1,4-5 / 2-3,6-7\n\t\t\t\tlet attr2 = ( index % 4 ) > 1;\n\t\t\t\t// 0-3 / 4-7\n\t\t\t\tlet attr1 = ( index > 3 );\n\n\t\t\t\tawait expect( page ).toMatchElement( `select[name=\"attribute_attr-1[${index}]\"]`, attr1 ? val2 : val1 );\n\t\t\t\tawait expect( page ).toMatchElement( `select[name=\"attribute_attr-2[${index}]\"]`, attr2 ? val2 : val1 );\n\t\t\t\tawait expect( page ).toMatchElement( `select[name=\"attribute_attr-3[${index}]\"]`, attr3 ? val2 : val1 );\n\t\t\t}\n\n\t\t\tawait expandVariations();\n\t\t\tawait waitForSelectorWithoutThrow( 'input[name=\"variable_is_virtual[0]\"]', 5 );\n\t\t\tawait setCheckbox('input[name=\"variable_is_virtual[0]\"]');\n\t\t\tawait expect(page).toFill('input[name=\"variable_regular_price[0]\"]', '9.99');\n\n\t\t\tawait setCheckbox('input[name=\"variable_is_virtual[1]\"]');\n\t\t\tawait expect(page).toFill('input[name=\"variable_regular_price[1]\"]', '11.99');\n\n\t\t\tawait setCheckbox('input[name=\"variable_manage_stock[2]\"]');\n\t\t\tawait expect(page).toFill('input[name=\"variable_regular_price[2]\"]', '20');\n\t\t\tawait expect(page).toFill('input[name=\"variable_weight[2]\"]', '200');\n\t\t\tawait expect(page).toFill('input[name=\"variable_length[2]\"]', '10');\n\t\t\tawait expect(page).toFill('input[name=\"variable_width[2]\"]', '20');\n\t\t\tawait expect(page).toFill('input[name=\"variable_height[2]\"]', '15');\n\n\t\t\tawait saveChanges();\n\t\t});\n\n\t\tit( 'can bulk-edit variations', async () => {\n\t\t\t// Verify that all 'Downloadable' checkboxes are UNCHECKED.\n\t\t\tawait expandVariations();\n\t\t\tfor ( let i = 0; i < 8; i++ ) {\n\t\t\t\tconst chkbox = await page.$(\n\t\t\t\t\t`input[name=\"variable_is_downloadable[${ i }]\"]`\n\t\t\t\t);\n\t\t\t\tconst isChecked = await (\n\t\t\t\t\tawait chkbox.getProperty( 'checked' )\n\t\t\t\t ).jsonValue();\n\t\t\t\texpect( isChecked ).toEqual( false );\n\t\t\t}\n\n\t\t\t// Perform the 'Toggle \"Downloadable\"' bulk action\n\t\t\tawait selectVariationAction('Toggle \"Downloadable\"');\n\n\t\t\tawait clickGoButton();\n\t\t\tawait uiUnblocked();\n\t\t\tawait uiUnblocked();\n\n\t\t\t// Verify that all 'Downloadable' checkboxes are now CHECKED.\n\t\t\tawait expandVariations();\n\t\t\tfor ( let i = 0; i < 8; i++ ) {\n\t\t\t\tconst chkbox = await page.$(\n\t\t\t\t\t`input[name=\"variable_is_downloadable[${ i }]\"]`\n\t\t\t\t);\n\t\t\t\tconst isChecked = await (\n\t\t\t\t\tawait chkbox.getProperty( 'checked' )\n\t\t\t\t ).jsonValue();\n\t\t\t\texpect( isChecked ).toEqual( true );\n\t\t\t}\n\t\t} );\n\n\t\tit( 'can delete all variations', async () => {\n\t\t\t// Select \"Delete all variations\" from the actions menu.\n\t\t\tawait selectVariationAction( 'Delete all variations' );\n\t\t\tconst firstDialog = await expect( page ).toDisplayDialog(\n\t\t\t\tasync () => {\n\t\t\t\t\tawait clickGoButton();\n\t\t\t\t}\n\t\t\t);\n\n\t\t\t// Verify that confirmation dialog shows the correct message.\n\t\t\tawait expect( firstDialog.message() ).toMatch(\n\t\t\t\t'Are you sure you want to delete all variations? This cannot be undone.'\n\t\t\t);\n\t\t\tawait uiUnblocked();\n\n\t\t\t// Verify that no variations were displayed.\n\t\t\tconst variationsCount = await page.$$( '.woocommerce_variation' );\n\t\t\texpect( variationsCount ).toHaveLength( 0 );\n\t\t} );\n\n\t\tit( 'can manually add a variation', async () => {\n\t\t\t// Select \"Add variation\" from the actions menu.\n\t\t\tawait selectVariationAction( 'Add variation' );\n\t\t\tawait expect( page ).toClick( 'a.do_variation_action' );\n\t\t\tawait uiUnblocked();\n\n\t\t\t// Set attribute values.\n\t\t\tfor ( let i = 0; i < defaultAttributes.length; i++ ) {\n\t\t\t\tawait expect( page ).toSelect(\n\t\t\t\t\t`select[name=\"attribute_attr-${ i + 1 }[0]\"]`,\n\t\t\t\t\tdefaultAttributes[ i ]\n\t\t\t\t);\n\t\t\t}\n\t\t\tawait saveChanges();\n\n\t\t\t// Verify that attribute values were saved.\n\t\t\tfor ( let i = 0; i < defaultAttributes.length; i++ ) {\n\t\t\t\tawait expect( page ).toMatchElement(\n\t\t\t\t\t`select[name=\"attribute_attr-${\n\t\t\t\t\t\ti + 1\n\t\t\t\t\t}[0]\"] option[selected]`,\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: defaultAttributes[ i ],\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\n\t\tit( 'can manage stock at variation level', async () => {\n\t\t\tawait expandVariations();\n\n\t\t\t// Enable \"Manage stock?\" option.\n\t\t\tawait setCheckbox( 'input.checkbox.variable_manage_stock' );\n\n\t\t\t// Input a regular price\n\t\t\tawait expect( page ).toFill(\n\t\t\t\t'input#variable_regular_price_0',\n\t\t\t\tsimpleProductPrice\n\t\t\t);\n\n\t\t\t// Verify that the \"Stock status\" dropdown menu disappears.\n\t\t\tawait expect( page ).toMatchElement( 'p.variable_stock_status', {\n\t\t\t\tvisible: false,\n\t\t\t} );\n\n\t\t\t// Fill out the \"Stock quantity\", \"Allow backorders?\", and \"Low stock threshold\" fields.\n\t\t\tawait expect( page ).toFill( 'input#variable_stock0', '100' );\n\t\t\tawait expect( page ).toSelect(\n\t\t\t\t'select#variable_backorders0',\n\t\t\t\t'Allow, but notify customer'\n\t\t\t);\n\t\t\tawait expect( page ).toFill(\n\t\t\t\t'input#variable_low_stock_amount0',\n\t\t\t\t'10'\n\t\t\t);\n\t\t\tawait saveChanges();\n\n\t\t\t// Verify that field values specific to stock management were saved.\n\n\t\t\tawait expandVariations();\n\n\t\t\t// Stock quantity\n\t\t\tconst actualStockQty = await page.$eval(\n\t\t\t\t'input#variable_stock0',\n\t\t\t\t( stockQtyInput ) => stockQtyInput.value\n\t\t\t);\n\t\t\texpect( actualStockQty ).toEqual( '100' );\n\n\t\t\t// Allow backorders?\n\t\t\tawait expect( page ).toMatchElement(\n\t\t\t\t'select#variable_backorders0 option[selected]',\n\t\t\t\t'Allow, but notify customer'\n\t\t\t);\n\n\t\t\t// Low stock threshold\n\t\t\tconst actualLowStockThresh = await page.$eval(\n\t\t\t\t'input#variable_low_stock_amount0',\n\t\t\t\t( lowStockThreshInput ) => lowStockThreshInput.value\n\t\t\t);\n\t\t\texpect( actualLowStockThresh ).toEqual( '10' );\n\t\t} );\n\n\t\tit( 'can set variation defaults', async () => {\n\t\t\t// Set default attribute values\n\t\t\tfor ( let i = 0; i < defaultAttributes.length; i++ ) {\n\t\t\t\tawait expect( page ).toSelect(\n\t\t\t\t\t`select[name=\"default_attribute_attr-${ i + 1 }\"]`,\n\t\t\t\t\tdefaultAttributes[ i ]\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tawait saveChanges();\n\t\t} );\n\n\t\tit( 'can remove a variation', async () => {\n\t\t\t// Click 'Remove' and confirm\n\t\t\tconst confirmDialog = await expect( page ).toDisplayDialog(\n\t\t\t\tasync () => {\n\t\t\t\t\tawait expect( page ).toClick( '.remove_variation.delete' );\n\t\t\t\t}\n\t\t\t);\n\t\t\texpect( confirmDialog.message() ).toMatch(\n\t\t\t\t'Are you sure you want to remove this variation?'\n\t\t\t);\n\t\t\tawait uiUnblocked();\n\n\t\t\t// Verify that no variations were displayed.\n\t\t\tconst variationsCount = await page.$$( '.woocommerce_variation' );\n\t\t\texpect( variationsCount ).toHaveLength( 0 );\n\t\t} );\n\t});\n};\n\nmodule.exports = {\n\trunAddSimpleProductTest,\n\trunAddVariableProductTest,\n};\n"]}