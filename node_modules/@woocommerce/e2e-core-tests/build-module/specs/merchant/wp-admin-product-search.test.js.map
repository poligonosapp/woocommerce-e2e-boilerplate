{"version":3,"sources":["/Users/ronrennick/Sites/solaris/woocommerce/packages/js/e2e-core-tests/src/specs/merchant/wp-admin-product-search.test.js"],"names":["merchant","createSimpleProduct","require","config","simpleProductName","get","simpleProductPrice","has","runProductSearchTest","describe","beforeAll","expect","length","toBeGreaterThan","login","beforeEach","openAllProductsView","it","searchString","substring","page","toFill","Promise","all","click","waitForNavigation","waitUntil","toMatchElement","text","toClick","module","exports"],"mappings":"AAAA;;AAEA;AACA;AACA;AACA,MAAM;AACLA,EAAAA,QADK;AAELC,EAAAA;AAFK,IAGFC,OAAO,CAAE,wBAAF,CAHX;;AAKA,MAAMC,MAAM,GAAGD,OAAO,CAAE,QAAF,CAAtB;;AACA,MAAME,iBAAiB,GAAGD,MAAM,CAACE,GAAP,CAAY,sBAAZ,CAA1B;AACA,MAAMC,kBAAkB,GAAGH,MAAM,CAACI,GAAP,CAAW,uBAAX,IAAsCJ,MAAM,CAACE,GAAP,CAAW,uBAAX,CAAtC,GAA4E,MAAvG;;AAEA,MAAMG,oBAAoB,GAAG,MAAM;AAClCC,EAAAA,QAAQ,CAAC,sCAAD,EAAyC,MAAM;AACtDC,IAAAA,SAAS,CAAC,YAAY;AACrB,YAAMT,mBAAmB,EAAzB,CADqB,CAGrB;;AACA,YAAMU,MAAM,CAACP,iBAAiB,CAACQ,MAAnB,CAAN,CAAiCC,eAAjC,CAAiD,CAAjD,CAAN;AAEA,YAAMb,QAAQ,CAACc,KAAT,EAAN;AACA,KAPQ,CAAT;AASAC,IAAAA,UAAU,CAAC,YAAY;AACtB,YAAMf,QAAQ,CAACgB,mBAAT,EAAN;AACA,KAFS,CAAV;AAIAC,IAAAA,EAAE,CAAC,uCAAD,EAA0C,YAAY;AACvD;AACA,UAAIC,YAAY,GAAGd,iBAAiB,CAACe,SAAlB,CAA4B,CAA5B,EAAgCf,iBAAiB,CAACQ,MAAlB,GAA2B,CAA3D,CAAnB;AACA,YAAMD,MAAM,CAACS,IAAD,CAAN,CAAaC,MAAb,CAAoB,oBAApB,EAA0CH,YAA1C,CAAN,CAHuD,CAKvD;;AACA,YAAMI,OAAO,CAACC,GAAR,CAAa,CAClBH,IAAI,CAACI,KAAL,CAAY,gBAAZ,CADkB,EAElBJ,IAAI,CAACK,iBAAL,CAAwB;AAAEC,QAAAA,SAAS,EAAE;AAAb,OAAxB,CAFkB,CAAb,CAAN,CANuD,CAWvD;;AACA,YAAMf,MAAM,CAACS,IAAD,CAAN,CAAaO,cAAb,CAA4B,YAA5B,EAA0C;AAAEC,QAAAA,IAAI,EAAExB;AAAR,OAA1C,CAAN;AACA,KAbC,CAAF;AAeAa,IAAAA,EAAE,CAAC,4CAAD,EAA+C,YAAY;AAC5D,YAAMN,MAAM,CAACS,IAAD,CAAN,CAAaC,MAAb,CAAoB,oBAApB,EAA0CjB,iBAA1C,CAAN;AAEA,YAAMkB,OAAO,CAACC,GAAR,CAAa,CAClBH,IAAI,CAACI,KAAL,CAAY,gBAAZ,CADkB,EAElBJ,IAAI,CAACK,iBAAL,CAAwB;AAAEC,QAAAA,SAAS,EAAE;AAAb,OAAxB,CAFkB,CAAb,CAAN,CAH4D,CAQ5D;;AACA,YAAMJ,OAAO,CAACC,GAAR,CAAa,CAClBZ,MAAM,CAACS,IAAD,CAAN,CAAaS,OAAb,CAAqB,YAArB,EAAmCzB,iBAAnC,CADkB,EAElBgB,IAAI,CAACK,iBAAL,CAAwB;AAAEC,QAAAA,SAAS,EAAE;AAAb,OAAxB,CAFkB,CAAb,CAAN;AAKA,YAAMf,MAAM,CAACS,IAAD,CAAN,CAAaO,cAAb,CAA4B,QAA5B,EAAsCvB,iBAAtC,CAAN;AACA,YAAMO,MAAM,CAACS,IAAD,CAAN,CAAaO,cAAb,CAA4B,iBAA5B,EAA+CrB,kBAA/C,CAAN;AACA,KAhBC,CAAF;AAkBAW,IAAAA,EAAE,CAAC,oDAAD,EAAuD,YAAY;AACpE,YAAMN,MAAM,CAACS,IAAD,CAAN,CAAaC,MAAb,CAAoB,oBAApB,EAA0C,UAA1C,CAAN,CADoE,CAGpE;;AACA,YAAMC,OAAO,CAACC,GAAR,CAAa,CAClBH,IAAI,CAACI,KAAL,CAAY,gBAAZ,CADkB,EAElBJ,IAAI,CAACK,iBAAL,CAAwB;AAAEC,QAAAA,SAAS,EAAE;AAAb,OAAxB,CAFkB,CAAb,CAAN,CAJoE,CASpE;;AACA,YAAMf,MAAM,CAACS,IAAD,CAAN,CAAaO,cAAb,CAA4B,WAA5B,EAAyC;AAAEC,QAAAA,IAAI,EAAE;AAAR,OAAzC,CAAN;AACA,KAXC,CAAF;AAYA,GA3DO,CAAR;AA4DA,CA7DD;;AA+DAE,MAAM,CAACC,OAAP,GAAiBvB,oBAAjB","sourcesContent":["/* eslint-disable jest/no-export, jest/no-standalone-expect */\n\n/**\n * Internal dependencies\n */\nconst {\n\tmerchant,\n\tcreateSimpleProduct\n} = require( '@woocommerce/e2e-utils' );\n\nconst config = require( 'config' );\nconst simpleProductName = config.get( 'products.simple.name' );\nconst simpleProductPrice = config.has('products.simple.price') ? config.get('products.simple.price') : '9.99';\n\nconst runProductSearchTest = () => {\n\tdescribe('Products > Search and View a product', () => {\n\t\tbeforeAll(async () => {\n\t\t\tawait createSimpleProduct();\n\n\t\t\t// Make sure the simple product name is greater than 1 to do a search\n\t\t\tawait expect(simpleProductName.length).toBeGreaterThan(1);\n\n\t\t\tawait merchant.login();\n\t\t});\n\n\t\tbeforeEach(async () => {\n\t\t\tawait merchant.openAllProductsView();\n\t\t});\n\n\t\tit('can do a partial search for a product', async () => {\n\t\t\t// Create partial search string\n\t\t\tlet searchString = simpleProductName.substring(0, (simpleProductName.length / 2));\n\t\t\tawait expect(page).toFill('#post-search-input', searchString);\n\n\t\t\t// Click search and wait for the page to finish loading\n\t\t\tawait Promise.all( [\n\t\t\t\tpage.click( '#search-submit' ),\n\t\t\t\tpage.waitForNavigation( { waitUntil: 'networkidle0' } ),\n\t\t\t]);\n\n\t\t\t// Verify we are getting the results back in the list\n\t\t\tawait expect(page).toMatchElement('.row-title', { text: simpleProductName });\n\t\t});\n\n\t\tit('can view a product\\'s details after search', async () => {\n\t\t\tawait expect(page).toFill('#post-search-input', simpleProductName);\n\n\t\t\tawait Promise.all( [\n\t\t\t\tpage.click( '#search-submit' ),\n\t\t\t\tpage.waitForNavigation( { waitUntil: 'networkidle0' } ),\n\t\t\t]);\n\n\t\t\t// Click to view the product and wait for the page to finish loading\n\t\t\tawait Promise.all( [\n\t\t\t\texpect(page).toClick('.row-title', simpleProductName),\n\t\t\t\tpage.waitForNavigation( { waitUntil: 'networkidle0' } ),\n\t\t\t]);\n\n\t\t\tawait expect(page).toMatchElement('#title', simpleProductName);\n\t\t\tawait expect(page).toMatchElement('#_regular_price', simpleProductPrice);\n\t\t});\n\n\t\tit('returns no results for non-existent product search', async () => {\n\t\t\tawait expect(page).toFill('#post-search-input', 'abcd1234');\n\n\t\t\t// Click search and wait for the page to finish loading\n\t\t\tawait Promise.all( [\n\t\t\t\tpage.click( '#search-submit' ),\n\t\t\t\tpage.waitForNavigation( { waitUntil: 'networkidle0' } ),\n\t\t\t]);\n\n\t\t\t// Verify we are getting the results back in the list\n\t\t\tawait expect(page).toMatchElement('.no-items', { text: 'No products found' });\n\t\t});\n\t});\n}\n\nmodule.exports = runProductSearchTest;\n"]}