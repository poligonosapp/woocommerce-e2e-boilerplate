{"version":3,"sources":["/Users/ronrennick/Sites/solaris/woocommerce/packages/js/e2e-core-tests/src/specs/merchant/wp-admin-settings-shipping-classes.test.js"],"names":["merchant","withRestApi","require","lorem","helpers","runAddShippingClassesTest","describe","beforeAll","login","openSettings","afterAll","deleteAllShippingClasses","it","shippingClassSlug","name","words","slug","description","sentence","shippingClassNoSlug","shippingClasses","expect","page","toClick","toFill","slugify","row","toMatchElement","text","timeout","module","exports"],"mappings":"AAAA;AACA;AACA;AACA,MAAM;AAAEA,EAAAA,QAAF;AAAYC,EAAAA;AAAZ,IAA4BC,OAAO,CAAC,wBAAD,CAAzC;AAEA;AACA;AACA;;;AACA,MAAM;AAAEC,EAAAA,KAAF;AAASC,EAAAA;AAAT,IAAqBF,OAAO,CAAC,OAAD,CAAlC;;AAEA,MAAMG,yBAAyB,GAAG,MAAM;AACvCC,EAAAA,QAAQ,CAAC,mCAAD,EAAsC,MAAM;AACnDC,IAAAA,SAAS,CAAC,YAAY;AACrB,YAAMP,QAAQ,CAACQ,KAAT,EAAN,CADqB,CAGrB;;AACA,YAAMR,QAAQ,CAACS,YAAT,CAAsB,UAAtB,EAAkC,SAAlC,CAAN;AACA,KALQ,CAAT;AAOAC,IAAAA,QAAQ,CAAC,YAAY;AACpB,YAAMT,WAAW,CAACU,wBAAZ,CAAsC,KAAtC,CAAN;AACA,KAFO,CAAR;AAIAC,IAAAA,EAAE,CAAC,0BAAD,EAA6B,YAAY;AAC1C,YAAMC,iBAAiB,GAAG;AACzBC,QAAAA,IAAI,EAAEX,KAAK,CAACY,KAAN,EADmB;AAEzBC,QAAAA,IAAI,EAAEb,KAAK,CAACa,IAAN,EAFmB;AAGzBC,QAAAA,WAAW,EAAEd,KAAK,CAACe,QAAN;AAHY,OAA1B;AAKA,YAAMC,mBAAmB,GAAG;AAC3BL,QAAAA,IAAI,EAAEX,KAAK,CAACY,KAAN,CAAY,CAAZ,CADqB;AAE3BC,QAAAA,IAAI,EAAE,EAFqB;AAG3BC,QAAAA,WAAW,EAAEd,KAAK,CAACe,QAAN;AAHc,OAA5B;AAKA,YAAME,eAAe,GAAG,CAACP,iBAAD,EAAoBM,mBAApB,CAAxB,CAX0C,CAa1C;;AACA,WAAK,MAAM;AAAEL,QAAAA,IAAF;AAAQE,QAAAA,IAAR;AAAcC,QAAAA;AAAd,OAAX,IAA0CG,eAA1C,EAA2D;AAC1D,cAAMC,MAAM,CAACC,IAAD,CAAN,CAAaC,OAAb,CAAqB,wBAArB,CAAN;AACA,cAAMF,MAAM,CAACC,IAAD,CAAN,CAAaE,MAAb,CACL,6CADK,EAELV,IAFK,CAAN;AAIA,cAAMO,MAAM,CAACC,IAAD,CAAN,CAAaE,MAAb,CACL,6CADK,EAELR,IAFK,CAAN;AAIA,cAAMK,MAAM,CAACC,IAAD,CAAN,CAAaE,MAAb,CACL,oDADK,EAELP,WAFK,CAAN;AAIA;;AACD,YAAMI,MAAM,CAACC,IAAD,CAAN,CAAaC,OAAb,CAAqB,yBAArB,CAAN,CA7B0C,CA+B1C;;AACAJ,MAAAA,mBAAmB,CAACH,IAApB,GAA2BZ,OAAO,CAACqB,OAAR,CAC1BN,mBAAmB,CAACL,IADM,CAA3B,CAhC0C,CAoC1C;;AACA,WAAK,MAAM;AAAEA,QAAAA,IAAF;AAAQE,QAAAA,IAAR;AAAcC,QAAAA;AAAd,OAAX,IAA0CG,eAA1C,EAA2D;AAC1D,cAAMM,GAAG,GAAG,MAAML,MAAM,CACvBC,IADuB,CAAN,CAEhBK,cAFgB,CAED,4BAFC,EAE6B;AAAEC,UAAAA,IAAI,EAAEZ,IAAR;AAAca,UAAAA,OAAO,EAAE;AAAvB,SAF7B,CAAlB;AAIA,cAAMR,MAAM,CAACK,GAAD,CAAN,CAAYC,cAAZ,CACL,yBADK,EAELb,IAFK,CAAN;AAIA,cAAMO,MAAM,CAACK,GAAD,CAAN,CAAYC,cAAZ,CACL,gCADK,EAELV,WAFK,CAAN;AAIA;AACD,KAnDC,CAAF;AAoDA,GAhEO,CAAR;AAiEA,CAlED;;AAoEAa,MAAM,CAACC,OAAP,GAAiB1B,yBAAjB","sourcesContent":["/**\n * Internal dependencies\n */\nconst { merchant, withRestApi } = require('@woocommerce/e2e-utils');\n\n/**\n * External dependencies\n */\nconst { lorem, helpers } = require('faker');\n\nconst runAddShippingClassesTest = () => {\n\tdescribe('Merchant can add shipping classes', () => {\n\t\tbeforeAll(async () => {\n\t\t\tawait merchant.login();\n\n\t\t\t// Go to Shipping Classes page\n\t\t\tawait merchant.openSettings('shipping', 'classes');\n\t\t});\n\n\t\tafterAll(async () => {\n\t\t\tawait withRestApi.deleteAllShippingClasses( false );\n\t\t});\n\n\t\tit('can add shipping classes', async () => {\n\t\t\tconst shippingClassSlug = {\n\t\t\t\tname: lorem.words(),\n\t\t\t\tslug: lorem.slug(),\n\t\t\t\tdescription: lorem.sentence()\n\t\t\t};\n\t\t\tconst shippingClassNoSlug = {\n\t\t\t\tname: lorem.words(3),\n\t\t\t\tslug: '',\n\t\t\t\tdescription: lorem.sentence()\n\t\t\t};\n\t\t\tconst shippingClasses = [shippingClassSlug, shippingClassNoSlug];\n\n\t\t\t// Add shipping classes\n\t\t\tfor (const { name, slug, description } of shippingClasses) {\n\t\t\t\tawait expect(page).toClick('.wc-shipping-class-add');\n\t\t\t\tawait expect(page).toFill(\n\t\t\t\t\t'.editing:last-child [data-attribute=\"name\"]',\n\t\t\t\t\tname\n\t\t\t\t);\n\t\t\t\tawait expect(page).toFill(\n\t\t\t\t\t'.editing:last-child [data-attribute=\"slug\"]',\n\t\t\t\t\tslug\n\t\t\t\t);\n\t\t\t\tawait expect(page).toFill(\n\t\t\t\t\t'.editing:last-child [data-attribute=\"description\"]',\n\t\t\t\t\tdescription\n\t\t\t\t);\n\t\t\t}\n\t\t\tawait expect(page).toClick('.wc-shipping-class-save');\n\n\t\t\t// Set the expected auto-generated slug\n\t\t\tshippingClassNoSlug.slug = helpers.slugify(\n\t\t\t\tshippingClassNoSlug.name\n\t\t\t);\n\n\t\t\t// Verify that the specified shipping classes were saved\n\t\t\tfor (const { name, slug, description } of shippingClasses) {\n\t\t\t\tconst row = await expect(\n\t\t\t\t\tpage\n\t\t\t\t).toMatchElement('.wc-shipping-class-rows tr', { text: slug, timeout: 50000 });\n\n\t\t\t\tawait expect(row).toMatchElement(\n\t\t\t\t\t'.wc-shipping-class-name',\n\t\t\t\t\tname\n\t\t\t\t);\n\t\t\t\tawait expect(row).toMatchElement(\n\t\t\t\t\t'.wc-shipping-class-description',\n\t\t\t\t\tdescription\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t});\n};\n\nmodule.exports = runAddShippingClassesTest;\n"]}