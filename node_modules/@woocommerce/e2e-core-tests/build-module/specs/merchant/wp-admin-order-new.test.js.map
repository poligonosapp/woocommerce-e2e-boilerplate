{"version":3,"sources":["/Users/ronrennick/Sites/solaris/woocommerce/packages/js/e2e-core-tests/src/specs/merchant/wp-admin-order-new.test.js"],"names":["merchant","uiUnblocked","withRestApi","AdminEdit","require","config","HTTPClientFactory","VariableProduct","GroupedProduct","SimpleProduct","ProductVariation","ExternalProduct","taxClasses","name","taxRates","rate","class","taxTotals","initProducts","apiUrl","get","adminUsername","adminPassword","httpClient","build","withBasicAuth","create","updateSettingOption","value","addTaxClasses","addTaxRates","initSimpleProduct","repo","restRepository","simpleProduct","regularPrice","taxClass","initVariableProduct","variations","attributes","option","variableProductData","type","variationRepo","productRepo","variableProduct","v","id","initGroupedProduct","groupedRepo","defaultGroupedData","groupedProductData","initExternalProduct","defaultProps","props","groupedProduct","externalProduct","products","runCreateOrderTest","describe","beforeAll","login","it","openNewOrder","expect","page","title","resolves","toMatch","toSelect","toFill","orderEdit","verifyPublish","toMatchElement","text","toClick","waitForSelector","firstResult","click","toDisplayDialog","waitForNavigation","taxRate","amount","module","exports"],"mappings":"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","sourcesContent":["/**\n * Internal dependencies\n */\nconst {\n\tmerchant,\n\tuiUnblocked,\n\twithRestApi,\n\tAdminEdit,\n} = require( '@woocommerce/e2e-utils' );\nconst config = require( 'config' );\nconst {\n\tHTTPClientFactory,\n\tVariableProduct,\n\tGroupedProduct,\n\tSimpleProduct,\n\tProductVariation,\n\tExternalProduct\n} = require( '@woocommerce/api' );\n\nconst taxClasses = [\n\t{\n\t\tname: 'Tax Class Simple',\n\t},\n\t{\n\t\tname: 'Tax Class Variable',\n\t},\n\t{\n\t\tname: 'Tax Class External',\n\t},\n];\n\nconst taxRates = [\n\t{\n\t\tname: 'Tax Rate Simple',\n\t\trate: '10.0000',\n\t\tclass: 'tax-class-simple'\n\t},\n\t{\n\t\tname: 'Tax Rate Variable',\n\t\trate: '20.0000',\n\t\tclass: 'tax-class-variable'\n\t},\n\t{\n\t\tname: 'Tax Rate External',\n\t\trate: '30.0000',\n\t\tclass: 'tax-class-external'\n\t}\n];\n\nconst taxTotals = ['$10.00', '$40.00', '$240.00'];\n\nconst initProducts = async () => {\n\tconst apiUrl = config.get('url');\n\tconst adminUsername = config.get('users.admin.username');\n\tconst adminPassword = config.get('users.admin.password');\n\tconst httpClient = HTTPClientFactory.build(apiUrl)\n\t\t.withBasicAuth(adminUsername, adminPassword)\n\t\t.create();\n\n\tawait withRestApi.updateSettingOption( 'general', 'woocommerce_calc_taxes', { value: 'yes' } );\n\tawait withRestApi.addTaxClasses( taxClasses );\n\tawait withRestApi.addTaxRates( taxRates );\n\n\t// Initialization functions per product type\n\tconst initSimpleProduct = async () => {\n\t\tconst repo = SimpleProduct.restRepository( httpClient );\n\t\tconst simpleProduct = {\n\t\t\tname: 'Simple Product 273722',\n\t\t\tregularPrice: '100',\n\t\t\ttaxClass: 'Tax Class Simple'\n\t\t};\n\t\treturn await repo.create( simpleProduct );\n\t};\n\n\tconst initVariableProduct = async () => {\n\t\tconst variations = [\n\t\t\t{\n\t\t\t\tregularPrice: '200',\n\t\t\t\tattributes: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Size',\n\t\t\t\t\t\toption: 'Small'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Colour',\n\t\t\t\t\t\toption: 'Yellow'\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\ttaxClass: 'Tax Class Variable'\n\t\t\t},\n\t\t\t{\n\t\t\t\tregularPrice: '300',\n\t\t\t\tattributes: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Size',\n\t\t\t\t\t\toption: 'Medium'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'Colour',\n\t\t\t\t\t\toption: 'Magenta'\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\ttaxClass: 'Tax Class Variable'\n\t\t\t}\n\t\t];\n\t\tconst variableProductData = {\n\t\t\tname: 'Variable Product 024611',\n\t\t\ttype: 'variable',\n\t\t\ttaxClass: 'Tax Class Variable'\n\t\t};\n\n\t\tconst variationRepo = ProductVariation.restRepository(httpClient);\n\t\tconst productRepo = VariableProduct.restRepository(httpClient);\n\t\tconst variableProduct = await productRepo.create(variableProductData);\n\t\tfor (const v of variations) {\n\t\t\tawait variationRepo.create(variableProduct.id, v);\n\t\t}\n\n\t\treturn variableProduct;\n\t};\n\tconst initGroupedProduct = async () => {\n\t\tconst groupedRepo = GroupedProduct.restRepository(httpClient);\n\t\tconst defaultGroupedData = config.get('products.grouped');\n\t\tconst groupedProductData = {\n\t\t\t...defaultGroupedData,\n\t\t\tname: 'Grouped Product 858012'\n\t\t};\n\n\t\treturn await groupedRepo.create(groupedProductData);\n\t};\n\tconst initExternalProduct = async () => {\n\t\tconst repo = ExternalProduct.restRepository(httpClient);\n\t\tconst defaultProps = config.get('products.external');\n\t\tconst props = {\n\t\t\t...defaultProps,\n\t\t\tname: 'External product 786794',\n\t\t\tregularPrice: '800',\n\t\t\ttaxClass: 'Tax Class External'\n\t\t};\n\t\treturn await repo.create(props);\n\t};\n\n\t// Create a product for each product type\n\tconst simpleProduct = await initSimpleProduct();\n\tconst variableProduct = await initVariableProduct();\n\tconst groupedProduct = await initGroupedProduct();\n\tconst externalProduct = await initExternalProduct();\n\n\treturn [simpleProduct, variableProduct, groupedProduct, externalProduct];\n};\n\nlet products;\n\nconst runCreateOrderTest = () => {\n\tdescribe('WooCommerce Orders > Add new order', () => {\n\t\tbeforeAll(async () => {\n\t\t\t// Initialize products for each product type\n\t\t\tproducts = await initProducts();\n\n\t\t\t// Login\n\t\t\tawait merchant.login();\n\t\t});\n\n\t\tit('can create new order', async () => {\n\t\t\t// Go to \"add order\" page\n\t\t\tawait merchant.openNewOrder();\n\n\t\t\t// Make sure we're on the add order page\n\t\t\tawait expect(page.title()).resolves.toMatch('Add new order');\n\n\t\t\t// Set order data\n\t\t\tawait expect(page).toSelect('#order_status', 'Processing');\n\t\t\tawait expect(page).toFill('input[name=order_date]', '2018-12-13');\n\t\t\tawait expect(page).toFill('input[name=order_date_hour]', '18');\n\t\t\tawait expect(page).toFill('input[name=order_date_minute]', '55');\n\n\t\t\t// Create order, verify that it was created. Trash order, verify that it was trashed.\n\t\t\tconst orderEdit = new AdminEdit();\n\t\t\tawait orderEdit.verifyPublish(\n\t\t\t\t'.order_actions li .save_order',\n\t\t\t\t'#message',\n\t\t\t\t'Order updated.',\n\t\t\t);\n\n\t\t\tawait expect( page ).toMatchElement( '#select2-order_status-container', { text: 'Processing' } );\n\t\t\tawait expect( page ).toMatchElement(\n\t\t\t\t'#woocommerce-order-notes .note_content',\n\t\t\t\t{\n\t\t\t\t\ttext: 'Order status changed from Pending payment to Processing.',\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\n\t\tit('can create new complex order with multiple product types & tax classes', async () => {\n\t\t\t// Go to \"add order\" page\n\t\t\tawait merchant.openNewOrder();\n\n\t\t\t// Open modal window for adding line items\n\t\t\tawait expect(page).toClick('button.add-line-item');\n\t\t\tawait expect(page).toClick('button.add-order-item');\n\t\t\tawait page.waitForSelector('.wc-backbone-modal-header');\n\n\t\t\t// Search for each product to add, then verify that they are saved\n\t\t\tfor (const { name } of products) {\n\t\t\t\tawait expect(page).toClick(\n\t\t\t\t\t'.wc-backbone-modal-content tr:last-child .select2-selection__arrow'\n\t\t\t\t);\n\t\t\t\tawait expect(page).toFill(\n\t\t\t\t\t'#wc-backbone-modal-dialog + .select2-container .select2-search__field',\n\t\t\t\t\tname\n\t\t\t\t);\n\t\t\t\tconst firstResult = await page.waitForSelector(\n\t\t\t\t\t'li[data-selected]'\n\t\t\t\t);\n\t\t\t\tawait firstResult.click();\n\t\t\t\tawait expect(page).toMatchElement(\n\t\t\t\t\t'.wc-backbone-modal-content tr:nth-last-child(2) .wc-product-search option',\n\t\t\t\t\tname\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Save the line items\n\t\t\tawait expect(page).toClick('.wc-backbone-modal-content #btn-ok');\n\t\t\tawait uiUnblocked();\n\n\t\t\t// Recalculate taxes\n\t\t\tawait expect(page).toDisplayDialog(async () => {\n\t\t\t\tawait expect(page).toClick('.calculate-action');\n\t\t\t});\n\t\t\tawait page.waitForSelector('th.line_tax');\n\n\t\t\t// Save the order and verify line items\n\t\t\tawait expect(page).toClick('button.save_order');\n\t\t\tawait page.waitForNavigation();\n\t\t\tfor (const { name } of products) {\n\t\t\t\tawait expect(page).toMatchElement('.wc-order-item-name', {\n\t\t\t\t\ttext: name\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Verify that the names of each tax class were shown\n\t\t\tfor (const taxRate of taxRates) {\n\t\t\t\tawait expect(page).toMatchElement('th.line_tax', {\n\t\t\t\t\ttext: taxRate.name\n\t\t\t\t});\n\t\t\t\tawait expect(page).toMatchElement('.wc-order-totals td.label', {\n\t\t\t\t\ttext: taxRate.name\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Verify tax amounts\n\t\t\tfor (const amount of taxTotals) {\n\t\t\t\tawait expect(page).toMatchElement('td.line_tax', {\n\t\t\t\t\ttext: amount\n\t\t\t\t});\n\t\t\t\tawait expect(page).toMatchElement('.wc-order-totals td.total', {\n\t\t\t\t\ttext: amount\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t});\n};\n\nmodule.exports = runCreateOrderTest;\n"]}