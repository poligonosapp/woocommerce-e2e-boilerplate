{"version":3,"sources":["/Users/ronrennick/Sites/solaris/woocommerce/packages/js/e2e-utils/src/page-utils.js"],"names":["pressKeyWithModifier","AdminEdit","waitForTimeout","clearAndFillInput","selector","value","page","waitForSelector","focus","type","clickTab","tabName","expect","toClick","text","settingsPageSaveChanges","Promise","all","waitForNavigation","waitUntil","click","permalinkSettingsPageSaveChanges","setCheckbox","checkbox","$","checkboxStatus","getProperty","jsonValue","unsetCheckbox","uiUnblocked","waitForFunction","Boolean","document","querySelector","backboneUnblocked","waitForSelectorWithoutThrow","timeoutInSeconds","selected","s","verifyPublishAndTrash","button","publishNotice","publishVerification","trashVerification","adminEdit","verifyPublish","toMatchElement","verifyCheckboxIsSet","toBe","verifyCheckboxIsUnset","not","verifyValueOfInputField","field","fieldValue","clickFilter","moveAllItemsToTrash","toSelect","evalAndClick","$eval","elem","selectOptionInSelect2","keyboard","press","searchForOrder","orderId","customerName","timeout","applyCoupon","couponCode","reload","error","removeCoupon","toLowerCase","selectOrderAction","action","select","clickAndWaitForSelector","buttonSelector","resultSelector","options","defaultOptions","logHTML","Object","assign","element"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { pressKeyWithModifier } from '@wordpress/e2e-test-utils';\n\n/**\n * Internal dependencies\n */\nimport { AdminEdit } from './pages/admin-edit';\nimport { waitForTimeout } from './flows/utils';\n\n/**\n * Perform a \"select all\" and then fill a input.\n *\n * @param {string} selector\n * @param {string} value\n */\nexport const clearAndFillInput = async ( selector, value ) => {\n\tawait page.waitForSelector( selector );\n\tawait page.focus( selector );\n\tawait pressKeyWithModifier( 'primary', 'a' );\n\tawait page.type( selector, value );\n};\n\n/**\n * Click a tab (on post type edit screen).\n *\n * @param {string} tabName Tab label\n */\nexport const clickTab = async ( tabName ) => {\n\tawait expect( page ).toClick( '.wc-tabs > li > a', { text: tabName } );\n};\n\n/**\n * Save changes on a WooCommerce settings page.\n */\nexport const settingsPageSaveChanges = async () => {\n\tawait page.focus( 'button.woocommerce-save-button' );\n\tawait Promise.all( [\n\t\tpage.waitForNavigation( { waitUntil: 'networkidle0' } ),\n\t\tpage.click( 'button.woocommerce-save-button' ),\n\t] );\n};\n\n/**\n * Save changes on Permalink settings page.\n */\nexport const permalinkSettingsPageSaveChanges = async () => {\n\tawait page.focus( '.wp-core-ui .button-primary' );\n\tawait Promise.all( [\n\t\tpage.waitForNavigation( { waitUntil: 'networkidle0' } ),\n\t\tpage.click( '.wp-core-ui .button-primary' ),\n\t] );\n};\n\n/**\n * Set checkbox.\n *\n * @param {string} selector\n */\nexport const setCheckbox = async( selector ) => {\n\tawait page.focus( selector );\n\tconst checkbox = await page.$( selector );\n\tconst checkboxStatus = ( await ( await checkbox.getProperty( 'checked' ) ).jsonValue() );\n\tif ( checkboxStatus !== true ) {\n\t\tawait checkbox.click();\n\t}\n};\n\n/**\n * Unset checkbox.\n *\n * @param {string} selector\n */\nexport const unsetCheckbox = async( selector ) => {\n\tawait page.focus( selector );\n\tconst checkbox = await page.$( selector );\n\tconst checkboxStatus = ( await ( await checkbox.getProperty( 'checked' ) ).jsonValue() );\n\tif ( checkboxStatus === true ) {\n\t\tawait checkbox.click();\n\t}\n};\n\n/**\n * Wait for UI blocking to end.\n */\nexport const uiUnblocked = async () => {\n\tawait page.waitForFunction( () => ! Boolean( document.querySelector( '.blockUI' ) ) );\n};\n\n/**\n * Wait for backbone blocking to end.\n */\nexport const backboneUnblocked = async () => {\n\tawait page.waitForFunction( () => ! Boolean( document.querySelector( '.wc-backbone-modal' ) ) );\n};\n\n/**\n * Conditionally wait for a selector without throwing an error.\n *\n * @param selector\n * @param timeoutInSeconds\n * @returns {Promise<boolean>}\n */\nexport const waitForSelectorWithoutThrow = async ( selector, timeoutInSeconds = 5 ) => {\n\tlet selected = await page.$( selector );\n\tfor ( let s = 0; s < timeoutInSeconds; s++ ) {\n\t\tif ( selected ) {\n\t\t\tbreak;\n\t\t}\n\t\tawait waitForTimeout( 1000 );\n\t\tselected = await page.$( selector );\n\t}\n\treturn Boolean( selected );\n};\n\n/**\n * Publish, verify that item was published. Trash, verify that item was trashed.\n *\n * @param {string} button (Publish)\n * @param {string} publishNotice\n * @param {string} publishVerification\n * @param {string} trashVerification\n */\nexport const verifyPublishAndTrash = async ( button, publishNotice, publishVerification, trashVerification ) => {\n\tconst adminEdit = new AdminEdit();\n\tawait adminEdit.verifyPublish( button, publishNotice, publishVerification );\n\n\t// Trash\n\tawait page.focus( 'a.submitdelete' );\n\tawait expect( page ).toClick( 'a.submitdelete' );\n\tawait page.waitForSelector( '#message' );\n\n\t// Verify\n\tawait expect( page ).toMatchElement( publishNotice, { text: trashVerification } );\n};\n\n/**\n * Verify that checkbox is set.\n *\n * @param {string} selector Selector of the checkbox that needs to be verified.\n */\nexport const verifyCheckboxIsSet = async( selector ) => {\n\tawait page.focus( selector );\n\tconst checkbox = await page.$( selector );\n\tconst checkboxStatus = ( await ( await checkbox.getProperty( 'checked' ) ).jsonValue() );\n\tawait expect( checkboxStatus ).toBe( true );\n};\n\n/**\n * Verify that checkbox is unset.\n *\n * @param {string} selector Selector of the checkbox that needs to be verified.\n */\nexport const verifyCheckboxIsUnset = async( selector ) => {\n\tawait page.focus( selector );\n\tconst checkbox = await page.$( selector );\n\tconst checkboxStatus = ( await ( await checkbox.getProperty( 'checked' ) ).jsonValue() );\n\tawait expect( checkboxStatus ).not.toBe( true );\n};\n\n/**\n * Verify the value of input field once it was saved (can be used for radio buttons verification as well).\n *\n * @param {string} selector Selector of the input field that needs to be verified.\n * @param {string} value Value of the input field that needs to be verified.\n */\nexport const verifyValueOfInputField = async( selector, value ) => {\n\tawait page.focus( selector );\n\tconst field = await page.$( selector );\n\tconst fieldValue = ( await ( await field.getProperty( 'value' ) ).jsonValue() );\n\tawait expect( fieldValue ).toBe( value );\n};\n\n/**\n * Clicks on a filter on a list page, such as WooCommerce > Orders or Posts > All Posts.\n *\n * @param {string} selector Selector of the filter link to be clicked.\n */\nexport const clickFilter = async ( selector ) => {\n\tawait page.waitForSelector( selector );\n\tawait page.focus( selector );\n\tawait Promise.all( [\n\t\tpage.click( `.subsubsub > ${selector} > a` ),\n\t\tpage.waitForNavigation( { waitUntil: 'networkidle0' } ),\n\t] );\n};\n\n/**\n * Moves all items in a list view to the trash.\n *\n * If there's more than 20 items, it moves all 20 items on the current page.\n */\nexport const moveAllItemsToTrash = async () => {\n\tawait setCheckbox( '#cb-select-all-1' );\n\tawait expect( page ).toSelect( '#bulk-action-selector-top', 'Move to Trash' );\n\tawait Promise.all( [\n\t\tpage.click( '#doaction' ),\n\t\tpage.waitForNavigation( { waitUntil: 'networkidle0' } ),\n\t] );\n};\n\n/**\n * Use puppeteer page eval to click an element.\n *\n * Useful for clicking items that have been added to the DOM via ajax.\n *\n * @param {string} selector Selector of the filter link to be clicked.\n */\nexport const evalAndClick = async ( selector ) => {\n\t// We use this when `expect(page).toClick()` is unable to find the element\n\t// See: https://github.com/puppeteer/puppeteer/issues/1769#issuecomment-637645219\n\tpage.$eval( selector, elem => elem.click() );\n};\n\n/**\n * Select a value from select2 search input field.\n *\n * @param {string} value Value of what to be selected\n * @param {string} selector Selector of the select2 search field\n */\nexport const selectOptionInSelect2 = async ( value, selector = 'input.select2-search__field' ) => {\n\tawait page.waitForSelector( selector );\n\tawait page.click( selector );\n\tawait page.type( selector, value );\n\tawait waitForTimeout( 2000 ); // to avoid flakyness, must wait before pressing Enter\n\tawait page.keyboard.press( 'Enter' );\n};\n\n/**\n * Search by any term for an order\n *\n * @param {string} value Value to be entered into the search field\n * @param {string} orderId Order ID\n * @param {string} customerName Customer's full name attached to order ID.\n */\nexport const searchForOrder = async ( value, orderId, customerName) => {\n\tawait clearAndFillInput( '#post-search-input', value );\n\tawait expect( page ).toMatchElement( '#post-search-input', value );\n\tawait expect( page ).toClick( '#search-submit' );\n\tawait page.waitForSelector( '#the-list', { timeout: 10000 } );\n\tawait expect( page ).toMatchElement( '.order_number > a.order-view', { text: `#${orderId} ${customerName}` } );\n};\n\n/**\n * Apply a coupon code within cart or checkout.\n * Method will try to apply a coupon in the checkout, otherwise will try to apply in the cart.\n *\n * @param couponCode string\n * @returns {Promise<void>}\n */\nexport const applyCoupon = async ( couponCode ) => {\n\ttry {\n\t\tawait Promise.all([\n\t\t\tpage.reload(),\n\t\t\tpage.waitForNavigation( { waitUntil: 'networkidle0' } ),\n\t\t]);\n\t\tawait expect( page ).toClick( 'a', { text: 'Click here to enter your code' } );\n\t\tawait uiUnblocked();\n\t\tawait clearAndFillInput( '#coupon_code', couponCode );\n\t\tawait expect( page ).toClick( 'button', {text: 'Apply coupon' } );\n\t\tawait uiUnblocked();\n\t} catch ( error ) {\n\t\tawait clearAndFillInput( '#coupon_code', couponCode );\n\t\tawait expect( page ).toClick( 'button', { text: 'Apply coupon' } );\n\t\tawait uiUnblocked();\n\t}\n};\n\n/**\n * Remove one coupon within cart or checkout.\n *\n * @param couponCode Coupon name.\n * @returns {Promise<void>}\n */\nexport const removeCoupon = async ( couponCode ) => {\n\tawait Promise.all([\n\t\tpage.reload(),\n\t\tpage.waitForNavigation( { waitUntil: 'networkidle0' } ),\n\t]);\n\tawait expect( page ).toClick( '[data-coupon=\"'+couponCode.toLowerCase()+'\"]', {text: '[Remove]' } );\n\tawait uiUnblocked();\n\tawait expect( page ).toMatchElement( '.woocommerce-message', {text: 'Coupon has been removed.' } );\n};\n\n/**\n *\n * Select and perform an order action in the `Order actions` postbox.\n *\n * @param {string} action The action to take on the order.\n */\nexport const selectOrderAction = async ( action ) => {\n\tawait page.select( 'select[name=wc_order_action]', action );\n\tawait Promise.all( [\n\t\tpage.click( '.wc-reload' ),\n\t\tpage.waitForNavigation( { waitUntil: 'networkidle0' } ),\n\t] );\n}\n\n\n/**\n * Evaluate and click a button selector then wait for a result selector.\n * This is a work around for what appears to be intermittent delays in handling confirm dialogs.\n *\n * @param {string} buttonSelector Selector of button to click\n * @param {string} resultSelector Selector to wait for after click\n * @param {number} timeout Timeout length in milliseconds. Default 5000.\n * @returns {Promise<void>}\n */\nexport const clickAndWaitForSelector = async ( buttonSelector, resultSelector, timeout = 5000 ) => {\n\tawait evalAndClick( buttonSelector );\n\tawait waitForSelector(\n\t\tpage,\n\t\tresultSelector,\n\t\t{\n\t\t\ttimeout\n\t\t}\n\t);\n};\n/**\n * Waits for selector to be present in DOM.\n * Throws a `TimeoutError` if element was not found after 30 sec.\n * Behavior can be modified with @param options. Possible keys: `visible`, `hidden`, `timeout`.\n * More details at: https://pptr.dev/#?product=Puppeteer&show=api-pagewaitforselectorselector-options\n *\n * @param {Puppeteer.Page} page Puppeteer representation of the page.\n * @param {string} selector CSS selector of the element\n * @param {Object} options Custom options to modify function behavior.\n */\nexport async function waitForSelector( page, selector, options = {} ) {\n\t// set up default options\n\tconst defaultOptions = { timeout: 30000, logHTML: false };\n\toptions = Object.assign( defaultOptions, options );\n\n\tconst element = await page.waitForSelector( selector, options );\n\treturn element;\n}\n"]}