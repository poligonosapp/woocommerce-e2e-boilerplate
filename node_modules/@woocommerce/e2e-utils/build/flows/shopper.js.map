{"version":3,"sources":["/Users/ronrennick/Sites/solaris/woocommerce/packages/js/e2e-utils/src/flows/shopper.js"],"names":["pressKeyWithModifier","require","config","getQtyInputExpression","getCartItemExpression","getRemoveExpression","MY_ACCOUNT_ADDRESSES","MY_ACCOUNT_ACCOUNT_DETAILS","MY_ACCOUNT_DOWNLOADS","MY_ACCOUNT_ORDERS","SHOP_MY_ACCOUNT_PAGE","SHOP_CART_PAGE","SHOP_CHECKOUT_PAGE","SHOP_PAGE","SHOP_PRODUCT_PAGE","uiUnblocked","clickAndWaitForSelector","gotoMyAccount","page","goto","waitUntil","shopper","addToCart","Promise","all","waitForNavigation","click","addToCartFromShopPage","productIdOrTitle","Number","isInteger","expect","toMatchElement","addToCartXPath","addToCartButton","$x","waitFor","goToCheckout","goToProduct","postID","goToShop","placeOrder","toClick","productIsInCheckout","productTitle","quantity","total","cartSubtotal","text","goToCart","productIsInCart","cartItemArgs","qty","cartItemXPath","resolves","toHaveLength","fillBillingDetails","customerBillingDetails","toFill","firstname","lastname","company","toSelect","country","addressfirstline","addresssecondline","city","state","postcode","phone","email","fillShippingDetails","customerShippingDetails","removeFromCart","removeItemXPath","removeButton","emptyCart","$","products","length","p","waitForSelector","setCartQuantity","quantityValue","quantityInputXPath","quantityInput","focus","type","toString","searchForProduct","prouductName","searchFieldSelector","timeout","title","toMatch","goToOrders","goToDownloads","goToAddresses","goToAccountDetails","login","get","logout","module","exports"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nconst { pressKeyWithModifier } = require( '@wordpress/e2e-test-utils' );\nconst config = require( 'config' );\n\n/**\n * Internal dependencies\n */\nconst {\n\tgetQtyInputExpression,\n\tgetCartItemExpression,\n\tgetRemoveExpression\n} = require( './expressions' );\nconst {\n\tMY_ACCOUNT_ADDRESSES,\n\tMY_ACCOUNT_ACCOUNT_DETAILS,\n\tMY_ACCOUNT_DOWNLOADS,\n\tMY_ACCOUNT_ORDERS,\n\tSHOP_MY_ACCOUNT_PAGE,\n\tSHOP_CART_PAGE,\n\tSHOP_CHECKOUT_PAGE,\n\tSHOP_PAGE,\n\tSHOP_PRODUCT_PAGE\n} = require( './constants' );\n\nconst { uiUnblocked, clickAndWaitForSelector } = require( '../page-utils' );\n\nconst gotoMyAccount = async () => {\n\tawait page.goto( SHOP_MY_ACCOUNT_PAGE, {\n\t\twaitUntil: 'networkidle0',\n\t} );\n};\n\nconst shopper = {\n\taddToCart: async () => {\n\t\tawait Promise.all( [\n\t\t\tpage.waitForNavigation( { waitUntil: 'networkidle0' } ),\n\t\t\tpage.click( '.single_add_to_cart_button' ),\n\t\t] );\n\t},\n\n\taddToCartFromShopPage: async ( productIdOrTitle ) => {\n\t\tif ( Number.isInteger( productIdOrTitle ) ) {\n\t\t\tconst addToCart = `a[data-product_id=\"${ productIdOrTitle }\"]`;\n\t\t\tawait page.click( addToCart );\n\t\t\tawait expect( page ).toMatchElement( addToCart + '.added' );\n\t\t} else {\n\t\t\tconst addToCartXPath = `//li[contains(@class, \"type-product\") and a/h2[contains(text(), \"${ productIdOrTitle }\")]]` +\n\t\t\t\t'//a[contains(@class, \"add_to_cart_button\") and contains(@class, \"ajax_add_to_cart\")';\n\n\t\t\tconst [ addToCartButton ] = await page.$x( addToCartXPath + ']' );\n\t\t\tawait addToCartButton.click();\n\n\t\t\t// @todo: Update to waitForXPath when available in Puppeteer api.\n\t\t\tawait page.waitFor( addToCartXPath + ' and contains(@class, \"added\")]' );\n\t\t}\n\n\t},\n\n\tgoToCheckout: async () => {\n\t\tawait page.goto( SHOP_CHECKOUT_PAGE, {\n\t\t\twaitUntil: 'networkidle0',\n\t\t} );\n\t},\n\n\tgoToProduct: async ( postID ) => {\n\t\tawait page.goto( SHOP_PRODUCT_PAGE + postID, {\n\t\t\twaitUntil: 'networkidle0',\n\t\t} );\n\t},\n\n\tgoToShop: async () => {\n\t\tawait page.goto(SHOP_PAGE, {\n\t\t\twaitUntil: 'networkidle0',\n\t\t});\n\t},\n\n\tplaceOrder: async () => {\n\t\tawait Promise.all( [\n\t\t\texpect( page ).toClick( '#place_order' ),\n\t\t\tpage.waitForNavigation( { waitUntil: 'networkidle0' } ),\n\t\t] );\n\t},\n\n\tproductIsInCheckout: async ( productTitle, quantity, total, cartSubtotal ) => {\n\t\tawait expect( page ).toMatchElement( '.product-name', { text: productTitle } );\n\t\tawait expect( page ).toMatchElement( '.product-quantity', { text: quantity } );\n\t\tawait expect( page ).toMatchElement( '.product-total .amount', { text: total } );\n\t\tawait expect( page ).toMatchElement( '.cart-subtotal .amount', { text: cartSubtotal } );\n\t},\n\n\tgoToCart: async () => {\n\t\tawait page.goto( SHOP_CART_PAGE, {\n\t\t\twaitUntil: 'networkidle0',\n\t\t} );\n\t},\n\n\tproductIsInCart: async ( productTitle, quantity = null ) => {\n\t\tconst cartItemArgs = quantity ? { qty: quantity } : {};\n\t\tconst cartItemXPath = getCartItemExpression( productTitle, cartItemArgs );\n\n\t\tawait expect( page.$x( cartItemXPath ) ).resolves.toHaveLength( 1 );\n\t},\n\n\tfillBillingDetails: async (\tcustomerBillingDetails ) => {\n\t\tawait expect( page ).toFill( '#billing_first_name', customerBillingDetails.firstname );\n\t\tawait expect( page ).toFill( '#billing_last_name', customerBillingDetails.lastname );\n\t\tawait expect( page ).toFill( '#billing_company', customerBillingDetails.company );\n\t\tawait expect( page ).toSelect( '#billing_country', customerBillingDetails.country );\n\t\tawait expect( page ).toFill( '#billing_address_1', customerBillingDetails.addressfirstline );\n\t\tawait expect( page ).toFill( '#billing_address_2', customerBillingDetails.addresssecondline );\n\t\tawait expect( page ).toFill( '#billing_city', customerBillingDetails.city );\n\t\tawait expect( page ).toSelect( '#billing_state', customerBillingDetails.state );\n\t\tawait expect( page ).toFill( '#billing_postcode', customerBillingDetails.postcode );\n\t\tawait expect( page ).toFill( '#billing_phone', customerBillingDetails.phone );\n\t\tawait expect( page ).toFill( '#billing_email', customerBillingDetails.email );\n\t},\n\n\tfillShippingDetails: async ( customerShippingDetails ) => {\n\t\tawait expect( page ).toFill( '#shipping_first_name', customerShippingDetails.firstname );\n\t\tawait expect( page ).toFill( '#shipping_last_name', customerShippingDetails.lastname );\n\t\tawait expect( page ).toFill( '#shipping_company', customerShippingDetails.company );\n\t\tawait expect( page ).toSelect( '#shipping_country', customerShippingDetails.country );\n\t\tawait expect( page ).toFill( '#shipping_address_1', customerShippingDetails.addressfirstline );\n\t\tawait expect( page ).toFill( '#shipping_address_2', customerShippingDetails.addresssecondline );\n\t\tawait expect( page ).toFill( '#shipping_city', customerShippingDetails.city );\n\t\tawait expect( page ).toSelect( '#shipping_state', customerShippingDetails.state );\n\t\tawait expect( page ).toFill( '#shipping_postcode', customerShippingDetails.postcode );\n\t},\n\n\tremoveFromCart: async ( productIdOrTitle ) => {\n\t\tif ( Number.isInteger( productIdOrTitle ) ) {\n\t\t\tawait page.click( `a[data-product_id=\"${ productIdOrTitle }\"]` );\n\t\t} else {\n\t\t\tconst cartItemXPath = getCartItemExpression( productIdOrTitle );\n\t\t\tconst removeItemXPath = cartItemXPath + '//' + getRemoveExpression();\n\n\t\t\tconst [ removeButton ] = await page.$x( removeItemXPath );\n\t\t\tawait removeButton.click();\n\t\t}\n\t},\n\n\temptyCart: async () => {\n\t\tawait page.goto( SHOP_CART_PAGE, {\n\t\t\twaitUntil: 'networkidle0',\n\t\t} );\n\n\t\t// Remove products if they exist\n\t\tif ( await page.$( '.remove' ) !== null ) {\n\t\t\tproducts = await page.$( '.remove' );\n\t\t\twhile ( products && products.length > 0 ) {\n\t\t\t\tfor (let p = 0; p < products.length; p++ ) {\n\t\t\t\t\tawait page.click( p );\n\t\t\t\t\tawait uiUnblocked();\n\t\t\t\t}\n\t\t\t\tproducts = await page.$( '.remove' );\n\t\t\t}\n\t\t}\n\n\t\t// Remove coupons if they exist\n\t\tif ( await page.$( '.woocommerce-remove-coupon' ) !== null ) {\n\t\t\tawait page.click( '.woocommerce-remove-coupon' );\n\t\t\tawait uiUnblocked();\n\t\t}\n\n\t\tawait page.waitForSelector('.woocommerce-info');\n\t\tawait expect( page ).toMatchElement( '.woocommerce-info', { text: 'Your cart is currently empty.' } );\n\t},\n\n\tsetCartQuantity: async ( productTitle, quantityValue ) => {\n\t\tconst cartItemXPath = getCartItemExpression( productTitle );\n\t\tconst quantityInputXPath = cartItemXPath + '//' + getQtyInputExpression();\n\n\t\tconst [ quantityInput ] = await page.$x( quantityInputXPath );\n\t\tawait quantityInput.focus();\n\t\tawait pressKeyWithModifier( 'primary', 'a' );\n\t\tawait quantityInput.type( quantityValue.toString() );\n\t},\n\n\tsearchForProduct: async ( prouductName ) => {\n\t\tconst searchFieldSelector = 'input.wp-block-search__input';\n\t\tawait page.waitForSelector(searchFieldSelector, { timeout: 100000 });\n\t\tawait expect(page).toFill(searchFieldSelector, prouductName);\n\t\tawait expect(page).toClick('.wp-block-search__button');\n\t\t// Single search results may go directly to product page\n\t\tif ( await page.waitForSelector('h2.entry-title') ) {\n\t\t\tawait expect(page).toMatchElement('h2.entry-title', {text: prouductName});\n\t\t\tawait expect(page).toClick('h2.entry-title', {text: prouductName});\n\t\t}\n\t\tawait page.waitForSelector('h1.entry-title');\n\t\tawait expect(page.title()).resolves.toMatch(prouductName);\n\t\tawait expect(page).toMatchElement('h1.entry-title', prouductName);\n\t},\n\n\t/*\n\t * My Accounts flows.\n\t */\n\tgoToOrders: async () => {\n\t\tawait page.goto( MY_ACCOUNT_ORDERS, {\n\t\t\twaitUntil: 'networkidle0',\n\t\t} );\n\t},\n\n\tgoToDownloads: async () => {\n\t\tawait page.goto( MY_ACCOUNT_DOWNLOADS, {\n\t\t\twaitUntil: 'networkidle0',\n\t\t} );\n\t},\n\n\tgoToAddresses: async () => {\n\t\tawait page.goto( MY_ACCOUNT_ADDRESSES, {\n\t\t\twaitUntil: 'networkidle0',\n\t\t} );\n\t},\n\n\tgoToAccountDetails: async () => {\n\t\tawait page.goto( MY_ACCOUNT_ACCOUNT_DETAILS, {\n\t\t\twaitUntil: 'networkidle0',\n\t\t} );\n\t},\n\n\tgotoMyAccount: gotoMyAccount,\n\n\tlogin: async () => {\n\t\tawait gotoMyAccount();\n\n\t\tawait expect( page.title() ).resolves.toMatch( 'My account' );\n\n\t\tawait page.type( '#username', config.get('users.customer.username') );\n\t\tawait page.type( '#password', config.get('users.customer.password') );\n\n\t\tawait Promise.all( [\n\t\t\tpage.waitForNavigation( { waitUntil: 'networkidle0' } ),\n\t\t\tpage.click( 'button[name=\"login\"]' ),\n\t\t] );\n\t},\n\tlogout: async () => {\n\t\tawait gotoMyAccount();\n\n\t\tawait expect( page.title() ).resolves.toMatch( 'My account' );\n\t\tawait page.click( '.woocommerce-MyAccount-navigation-link--customer-logout a' );\n\t},\n};\n\nmodule.exports = shopper;\n"]}