{"version":3,"sources":["@wordpress/e2e-test-utils/src/delete-theme.js"],"names":["deleteTheme","slug","newThemeSlug","newThemeSearchTerm","page","click","waitForSelector","waitFor","themeSlug","document","querySelector"],"mappings":";;;;;;;;;;;;;AAGA;;AACA;;AACA;;AACA;;AACA;;AACA;;AARA;AACA;AACA;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;SACsBA,W;;;;;yFAAf,iBACNC,IADM;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,2EAEiC,EAFjC,EAEJC,YAFI,QAEJA,YAFI,EAEUC,kBAFV,QAEUA,kBAFV;AAAA;AAAA,mBAIA,2CAJA;;AAAA;AAAA,iBAMDD,YANC;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAOC,gCAAcA,YAAd,EAA4BC,kBAA5B,CAPD;;AAAA;AAAA;AAAA,mBAQC,kCAAeD,YAAf,CARD;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,mBAUC,oCAAgB,YAAhB,CAVD;;AAAA;AAAA;AAAA,mBAaS,sCAAkBD,IAAlB,CAbT;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAcC,yCAdD;;AAAA;AAAA;;AAAA;AAAA;AAAA,mBAkBAG,IAAI,CAACC,KAAL,wBAA4BJ,IAA5B,SAlBA;;AAAA;AAAA;AAAA,mBAmBAG,IAAI,CAACE,eAAL,CAAsB,8BAAtB,CAnBA;;AAAA;AAAA;AAAA,mBAoBAF,IAAI,CAACC,KAAL,CAAY,8BAAZ,CApBA;;AAAA;AAAA;AAAA,mBAqBAD,IAAI,CAACE,eAAL,CAAsB,uBAAtB,CArBA;;AAAA;AAAA;AAAA,mBAyBAF,IAAI,CAACG,OAAL,CACL,UAAEC,SAAF;AAAA,qBACC,CAAEC,QAAQ,CAACC,aAAT,wBAAwCF,SAAxC,SADH;AAAA,aADK,EAGLP,IAHK,CAzBA;;AAAA;AAAA;AAAA,mBA+BA,yCA/BA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["/**\n * Internal dependencies\n */\nimport { activateTheme } from './activate-theme';\nimport { installTheme } from './install-theme';\nimport { switchUserToAdmin } from './switch-user-to-admin';\nimport { switchUserToTest } from './switch-user-to-test';\nimport { visitAdminPage } from './visit-admin-page';\nimport { isThemeInstalled } from './theme-installed';\n\n/**\n * Deletes a theme from the site, activating another theme if necessary.\n *\n * @param {string} slug Theme slug.\n * @param {Object?} settings Optional settings object.\n * @param {string?} settings.newThemeSlug A theme to switch to if the theme to delete is active. Required if the theme to delete is active.\n * @param {string?} settings.newThemeSearchTerm A search term to use if the new theme is not findable by its slug.\n */\nexport async function deleteTheme(\n\tslug,\n\t{ newThemeSlug, newThemeSearchTerm } = {}\n) {\n\tawait switchUserToAdmin();\n\n\tif ( newThemeSlug ) {\n\t\tawait installTheme( newThemeSlug, newThemeSearchTerm );\n\t\tawait activateTheme( newThemeSlug );\n\t} else {\n\t\tawait visitAdminPage( 'themes.php' );\n\t}\n\n\tif ( ! ( await isThemeInstalled( slug ) ) ) {\n\t\tawait switchUserToTest();\n\t\treturn;\n\t}\n\n\tawait page.click( `[data-slug=\"${ slug }\"]` );\n\tawait page.waitForSelector( '.theme-actions .delete-theme' );\n\tawait page.click( '.theme-actions .delete-theme' );\n\tawait page.waitForSelector( 'body:not(.modal-open)' );\n\n\t// Wait for the theme to be removed from the page.\n\t// eslint-disable-next-line no-restricted-syntax\n\tawait page.waitFor(\n\t\t( themeSlug ) =>\n\t\t\t! document.querySelector( `[data-slug=\"${ themeSlug }\"]` ),\n\t\tslug\n\t);\n\n\tawait switchUserToTest();\n}\n"]}